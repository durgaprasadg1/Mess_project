<%- layout("/layouts/boilerplate") %>

<style>
  :root {
    --primary-color: #ff8c00;         
    --secondary-color: #ffb300;  
    --background-light: #fff7e6;
    --text-dark: #4d2600;         
    --hover-shadow: 0 1.5rem 2.5rem rgba(0, 0, 0, 0.1);
  }

  

  .mess-card {
    border: none;
    border-radius: 1rem;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    background-color: white;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.05);
  }

  .mess-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--hover-shadow);
  }

  .mess-card img {
    object-fit: cover;
    height: 18rem;
    width: 100%;
  }

  .mess-card-body {
    padding: 1.5rem;
  }

  .mess-title {
    font-size: 1.75rem;
    font-weight: bold;
    color: var(--primary-color);
  }

  .mess-description {
    color: var(--text-dark);
    margin-top: 0.5rem;
  }

  .mess-rating {
    margin-top: 1rem;
  }
  

  .mess-rating .badge {
    font-size: 1rem;
    background-color: var(--secondary-color);
    color: white;
    padding: 0.5rem 0.8rem;
    border-radius: 1rem;
  }

  .view-btn {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    border: none;
    border-radius: 50px;
    padding: 0.5rem 1.5rem;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }

  .view-btn:hover {
    transform: scale(1.05);
    opacity: 0.95;
  }
</style>

<section class="container py-5">
  <h2 class="text-center fw-bold mb-5" style="color: var(--primary-color);">
    Explore Our Messes
  </h2>
  
  <% if (messes && messes.length > 0) { %>
    <div class="row g-4">
      <% messes.forEach(mess => { %>
        <div class="col-md-6 col-lg-4">
          <div class="card mess-card">
            <% if (mess.image) { %>
              <img src="<%= mess.image.url %>" alt="<%= mess.name %>">
            <% } else { %>
              <img src="https://source.unsplash.com/800x600/?restaurant" alt="Mess Image">
            <% } %>
            <div class="card-body mess-card-body">
              <h5 class="mess-title"><%= mess.name %></h5>
              <p class="mess-description">
                <%= mess.description.length > 100 ? mess.description.substring(0,100) + '...' : mess.description %>
              </p>
              <p> <i class="fa-solid fa-location-dot text-secondary fs-5 me-1"></i><%= mess.address %></p>
              <% if(mess.avgRating){ %>
              <div class="mess-rating">
                <span class="badge">
                  <i class="fa fa-star me-1"></i>
                  <%= mess.avgRating %> / 5
                </span>
              </div>
              <% } %>
              <div class="mt-3">
                <a href="/mess/<%= mess._id %>" class="btn view-btn shadow-sm">
                  View Details
                </a>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <div class="alert alert-info text-center">
      No messes found.
    </div>
  <% } %>
</section>