<div
  id="loader"
  class="d-flex justify-content-center align-items-center"
  style="
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: white;
    z-index: 9999;
    opacity: 1;
  "
>
  <div class="spinner-grow text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
<%- layout("/layouts/boilerplate") %>


<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <div class="card shadow-lg border-0 rounded-3">
        <div class="card-body p-4">
          <h3 class="text-center mb-4">Add New Mess</h3>

          <small style="color: gray;">
            Note: Please add mess when you are near mess. Your current location will be saved automatically with this Mess.
          </small>
          <form
            method="post"
            action="/mess/new"
            enctype="multipart/form-data"
            novalidate
            class="needs-validation"
          >
            <div class="mb-3">
              <label for="name" class="form-label fw-semibold">Mess Name</label>
              <input
                type="text"
                id="name"
                name="name"
                class="form-control"
                placeholder="Kakunchi Mess"
                required
              />
              <div class="invalid-feedback">Give a sophisticated name</div>
            </div>

            <div class="mb-3">
              <label for="tagline" class="form-label fw-semibold"
                >Tag Line</label
              >
              <input
                type="text"
                id="tagline"
                name="description"
                class="form-control"
                placeholder="Bin Khaye Raha Naa Jaaye"
              />
            </div>

            <div class="mb-3">
              <label for="address" class="form-label fw-semibold"
                >Address</label
              >
              <input
                type="text"
                id="address"
                name="address"
                class="form-control"
                placeholder="Give Proper Address"
                required
              />
              <div class="invalid-feedback">Add Proper Address</div>
            </div>

            <div class="mb-3">
              <label for="category" class="form-label fw-semibold"
                >Category :</label
              >
              <select name="category" id="category">
                <option value="veg">Veg</option>
                <option value="nonveg">Non-Veg</option>
                <option value="both">Non-Veg + Veg</option>
              </select>

            </div>
            <div class="mb-3">
              <label for="ownerName" class="form-label fw-semibold"></label>
                Owner Name :</label
              >
              <input
                type="text"
                id="ownerName"
                name="ownerName"
                class="form-control"
                placeholder="RajPal Yadav"
                minlength="3"
                required
              />
            </div>
             <div class="invalid-feedback">Invalid Name</div>

            <div class="mb-3">
              <label for="adharNumber" class="form-label fw-semibold"
                >Aadhaar Number :</label
              >
              <input
                type="text"
                id="adharNumber"
                name="adharNumber"
                class="form-control"
                placeholder="0000 0000 0000"
                pattern="\d{12}"
              required />
            </div>
            <div class="invalid-feedback">Invalid Adhar Number</div>


            <div class="mb-3">
              <label for="phoneNumber" class="form-label fw-semibold"
                >Phone Number :</label
              >
              <input
                type="tel"
                id="phoneNumber"
                name="phoneNumber"
                class="form-control"
                placeholder="9999999999"
                pattern="\d{10}"
              required />
            </div>
            <div class="invalid-feedback">Invalid Phone Number</div>

              <input type="hidden" id="lat" name="lat">
              <input type="hidden" id="lon" name="lon">


            <div class="mb-3">
              <label for="image" class="form-label fw-semibold"
                >Mess Banner</label
              >
              <input
                type="file"
                id="image"
                name="image"
                accept=".jpg,.jpeg,.png"

                class="form-control"
                required
              />
              <div class="invalid-feedback">
                Only .jpg, .jpeg, .png formats are allowed
              </div>
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg">
                Add Mess
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
   window.addEventListener("load", function () {
    const loader = document.getElementById("loader");
    loader.style.transition = "opacity 0.5s ease";
    loader.style.opacity = "0";
    loader.style.zIndex = -99;
    setTimeout(() => loader.style.display = "none", 500);
  });


navigator.geolocation.getCurrentPosition(
  (pos) => {
    document.getElementById("lat").value = pos.coords.latitude;
    document.getElementById("lon").value = pos.coords.longitude;
  },
  (err) => {
    console.error(err);
    alert("Unable to fetch location. Please allow location access.");
  }

);
</script>